import{_,L as k,I as x,c as a,a as h,o as l,b as c,t as d,F as y,r as v,ab as I,S as b,e as C,m as g,u as w,k as f,G as m,D as V,ac as T}from"./wizrobe.js";import{F as O}from"./filterbox.bundle.js";const S={props:["items","group","hide"],mixins:[x],emits:["update:modelValue"],inject:["selected"],methods:{formatNumber:k},data(){return{isOpen:!0}},computed:{shown(){const e=[],t=this.items.length;for(let o=0;o<t;o++){const n=this.items[o];!this.reslocked(n)&&!this.hide[n.id]&&e.push(n)}return e}}},j={key:0},B={class:"arrows"},N={key:0,class:"gloss-items"},$=["data-key"],E=["onClick"],F={key:1};function G(e,t,o,n,s,r){return r.shown.length>0?(l(),a("div",j,[c("div",{class:"groupTitle separate",onClick:t[0]||(t[0]=i=>s.isOpen=!s.isOpen)},[c("span",null,d(o.group),1),c("span",B,d(s.isOpen?"▼":"▲"),1)]),s.isOpen?(l(),a("div",N,[(l(!0),a(y,null,v(r.shown,i=>(l(),a("div",{class:"rsrc separate hidable gloss-item","data-key":i.id,key:i.id},[i!=r.selected?(l(),a("span",{key:0,onClick:u=>r.selected=i},[c("u",null,d(i.name.toTitleCase()),1)],8,E)):(l(),a("span",F,d(i.name.toTitleCase()),1))],8,$))),128))])):h("",!0)])):h("",!0)}const M=_(S,[["render",G],["__scopeId","data-v-a2327c6d"]]),U={props:["items"],mixins:[I],data(){const e=b.getSubVars("entryview");let t={};return e&&e.hide&&(t=e.hide),{groups:null,hide:t}},components:{group:M},methods:{onSelected(e){this.$emit("selected",e)}},computed:{filteredItems(){const e=this.items,t={other:[]},o=e.length;for(let n=0;n<o;n++){const s=e[n];if(s.hide)continue;const r=s.group||(s.tags?s.tags[0]:"other");(t[r]||(t[r]=[])).push(s)}return this.groups=t,this.groups},hideTip(){return"Used to hide and unhide entries. This setting is retained between characters."}},created(){const e=this.items,t={other:[]},o=e.length;for(let n=0;n<o;n++){const s=e[n];if(s.hide)continue;const r=s.group||(s.tags?s.tags[0]:"other");(t[r]||(t[r]=[])).push(s)}this.groups=t}},D={class:"res-list"},L={class:"config"},H={key:0,class:"res-container"};function P(e,t,o,n,s,r){const i=g("group");return l(),a("div",D,[c("div",L,[c("button",{type:"button",ref:"btnHides",class:"btnConfig",onMouseenterCapture:t[0]||(t[0]=C(u=>e.itemOver(u,null,null,null,r.hideTip),["stop"]))},null,544)]),s.groups?(l(),a("div",H,[(l(!0),a(y,null,v(r.filteredItems,(u,p)=>(l(),w(i,{class:"res-group",items:u,group:p,hide:s.hide,key:p},null,8,["items","group","hide"]))),128))])):h("",!0)])}const R=_(U,[["render",P],["__scopeId","data-v-2ed51653"]]),q={props:[],data(){return{filtered:null,selected:null}},provide(){return{selected:T({get:()=>this.selected,set:e=>this.selected=e})}},created(){let e=b.getSubVars("entryview");e?this.selected=m.state.glossaryentries.find(t=>t.id===e&&t.locked===!1):this.selected=null,this.filtered=this.baseItems},components:{filterbox:O,entries:R},methods:{searchIt(e,t){const o=new RegExp(t,"i");if(o.test(e.name))return!0;if(e.tags){let n=e.tags;for(let s=n.length-1;s>=0;s--)if(o.test(n[s]))return!0}return!1}},computed:{hall(){return V.hall},baseItems(){return m.state.glossaryentries.concat(this.hall.glossaryentries)},postfilter(){return this.filtered},joineddesc(){return this.selected.desc.join(`
`)},tags(){let e=this.selected.tags;typeof e=="string"&&(e=[e]);let t=[];for(var o=0;o<e.length;o++){let n=e[o];n=m.state.tagSets[n]||n,!(n==null||n.hide)&&(n instanceof Object&&n.name?t.push(n.name.toTitleCase()):t.push(this.tagNames(n)))}return t.join(", ")}}},z={class:"main"},A={class:"menu"},J={key:0,class:"glossary"},K={class:"boldlarge"},Q={key:0,class:"tight note-text"},W={class:"glossdesc"};function X(e,t,o,n,s,r){const i=g("filterbox"),u=g("entries");return l(),a("div",z,[c("div",A,[f(i,{modelValue:s.filtered,"onUpdate:modelValue":t[0]||(t[0]=p=>s.filtered=p),prop:r.searchIt,items:r.baseItems},null,8,["modelValue","prop","items"]),f(u,{items:r.postfilter},null,8,["items"])]),s.selected?(l(),a("div",J,[c("div",K,d(s.selected.name.toTitleCase()||""),1),s.selected.tags?(l(),a("div",Q,d(r.tags),1)):h("",!0),c("div",W,d(r.joineddesc||""),1)])):h("",!0)])}const ee=_(q,[["render",X],["__scopeId","data-v-36962921"]]);export{ee as default};
