import{_ as g,P as _,I as p,j as m,c as o,o as d,b as a,a as v,t as h,e as b,k as x,l as w,m as f,g as M,h as y,q as I,w as V,d as F,F as S,r as C,G as W,s as B,S as k,u as D}from"./wizrobe.js";import{F as L}from"./filterbox.bundle.js";const T={props:["skill","active"],mixins:[p],components:{bar:_},computed:{rate(){return this.skill.rate.value.toFixed(1)},exp(){return m(Math.floor(this.skill.exp))},length(){return m(Math.floor(this.skill.length))}}},j=e=>(M("data-v-fe298b01"),e=e(),y(),e),G={class:"skill fade-in"},H={key:0,class:"flex-row"},N={class:"flex-col"},O=j(()=>a("span",null,"Level",-1)),U=["disabled"],E={key:1},z=["disabled"],P={key:0};function R(e,s,t,l,n,i){const u=f("bar");return d(),o("div",G,[a("span",{class:"separate",onMouseenterCapture:s[2]||(s[2]=b(c=>e.itemOver(c,t.skill),["stop"]))},[a("span",null,h(t.skill.name),1),t.skill.owned?(d(),o("div",H,[a("div",N,[O,a("span",null,h(Math.floor(t.skill.valueOf())+"/"+(Math.trunc(t.skill.max.valueOf()*10)/10).toFixed(1)),1)]),a("button",{type:"button",class:"train-btn",onClick:s[0]||(s[0]=c=>e.$emit("train",t.skill)),disabled:!t.skill.canUse()},h(t.active?"Stop":"Train"),9,U)])):(d(),o("span",E,[a("button",{type:"button",onClick:s[1]||(s[1]=c=>e.emit("buy",t.skill)),disabled:!t.skill.canUse()},"ðŸ”’",8,z)]))],32),t.skill.owned?(d(),o("div",P,[x(u,{value:t.skill.exp,max:t.skill.length,"hide-stats":"true"},null,8,["value","max"]),w(" exp: "+h(i.exp+" / "+i.length),1)])):v("",!0)])}const q=g(T,[["render",R],["__scopeId","data-v-fe298b01"]]),A={props:["state"],mixins:[p],components:{skill:q,filterbox:L},data(){let e=k.getSubVars("skills");return Object.assign({filtered:null},e)},updated(){(this.prevWidth!==this.getWidth(this.$el)||this.prevLength!==this.filtered.length)&&(this.resizeGrid(),this.prevWidth=this.getWidth(this.$el),this.prevLength=this.filtered.length)},computed:{chkHide:{get(){return this.hideMaxed},set(e){this.hideMaxed=k.setSubVar("skills","hideMaxed",e)}},arcana(){return this.state.getData("arcana")},skills(){return this.state.skills.slice().sort(B)},available(){return this.hideMaxed?this.skills.filter(e=>!e.maxed()&&!this.reslocked(e)):this.skills.filter(e=>!this.reslocked(e))}},methods:{lowFixed:I,train(e){W.toggleTask(e)},getWidth(e){return e.getBoundingClientRect().width},resizeGrid(){let e=this.$refs.skillgrid;e.style="";let s=0;for(let t of e.children){let l=this.getWidth(t.children[0]);l>s&&(s=l)}if(s>0){let t=Math.floor(this.getWidth(e)/s);e.style=`grid-template-columns: repeat( auto-fit, minmax(calc(100% / ${t}), 0.5fr) )`}},searchIt(e,s){const t=new RegExp(s,"i");if(t.test(e.name))return!0;if(e.tags){let l=e.tags;for(let n=l.length-1;n>=0;n--)if(t.test(l[n]))return!0}if(e.mod&&typeof e.mod=="object"){for(let l in e.mod)if(game.state.getData(l)&&typeof game.state.getData(l)=="object"&&t.test(game.state.getData(l).name))return!0}if(e.result)for(let l in e.result){let n=game.state.getData(l);if(n!=null&&n.name.toLowerCase().includes(s.toLowerCase()))return!0}return!1}}},J={class:"skills"},K={class:"separate title"},Q=["id"],X=["for"],Y={class:"subs",ref:"skillgrid"};function Z(e,s,t,l,n,i){const u=f("filterbox"),c=f("skill");return d(),o("div",J,[a("span",K,[x(u,{modelValue:e.filtered,"onUpdate:modelValue":s[0]||(s[0]=r=>e.filtered=r),prop:i.searchIt,items:i.available},null,8,["modelValue","prop","items"]),a("span",null,[V(a("input",{id:e.elmId("hideMax"),type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=r=>i.chkHide=r)},null,8,Q),[[F,i.chkHide]]),a("label",{for:e.elmId("hideMax")},"Hide Maxed",8,X)]),a("span",null,"Arcana: "+h(i.lowFixed(i.arcana.value))+"/"+h(i.lowFixed(i.arcana.max)),1)]),a("div",Y,[(d(!0),o(S,null,C(e.filtered,r=>(d(),D(c,{key:r.id,skill:r,active:r.running,onTrain:i.train},null,8,["skill","active","onTrain"]))),128))],512)])}const te=g(A,[["render",Z],["__scopeId","data-v-e680dcff"]]);export{te as default};
