import{_ as m,I as v,c as i,o as u,k as p,b as a,m as _,F as g,r as y,G as c,N as b,K as C,e as k,a as B,t as d}from"./wizrobe.js";import{F as L}from"./filterbox.bundle.js";const S={mixins:[v],data(){return{filtered:null,sortBy:"level",sortOrder:1,loreLevels:{}}},components:{filterbox:L},beforeCreate(){this.game=c},methods:{tryUse(e){this.emit(C,e)},loreLevel(e){let t=this.loreLevels[e.kind];return t===void 0&&(t=this.loreLevels[e.kind]=b(e.kind,c)),t},setSort(e){this.sortBy===e?this.sortOrder=-this.sortOrder:this.sortBy=e},searchIt(e,t){const o=new RegExp(t,"i");if(o.test(e.name)||o.test(e.kind))return!0;if(e.tags){for(let r of e.tags)if(r.includes(t))return!0}if(e.result)for(let r in e.result){let n=game.state.getData(r);if(n!=null&&n.name.toLowerCase().includes(t.toLowerCase()))return!0}if(e.loot)for(let r in e.loot){let n=game.state.getData(r);if(n!=null&&n.name.toLowerCase().includes(t.toLowerCase()))return!0}return!1},canShowBuy(e){return e.space>0},canBuy(e){return e.canUse(this.game)&&this.minions.freeSpace()>0}},computed:{minions(){return c.state.minions},allItems(){let e=this.game.state.monsters;var t=[];for(let r=e.length-1;r>=0;r--){var o=e[r];o.value<=0||t.push(o)}return t},sorted(){let e=this.sortBy,t=this.sortOrder,o,r;return(this.filtered||this.allItems).sort((n,l)=>(o=n[e],r=l[e],o>r?t:r>o?-t:0))}}},x={class:"bestiary"},w={class:"char-list"},I={class:"bestiary"},M=["onMouseenterCapture"],V={class:"lg-name"},N={class:"num-align"},O={class:"num-align"},U={class:"num-align"},F={key:0},D=["onClick","disabled"];function E(e,t,o,r,n,l){const h=_("filterbox");return u(),i("div",x,[p(h,{modelValue:n.filtered,"onUpdate:modelValue":t[0]||(t[0]=s=>n.filtered=s),prop:l.searchIt,items:l.allItems,"min-items":14},null,8,["modelValue","prop","items"]),a("div",w,[a("table",I,[a("tr",null,[a("th",{class:"table-head",onClick:t[1]||(t[1]=s=>l.setSort("name"))},"Creature"),a("th",{class:"table-head",onClick:t[2]||(t[2]=s=>l.setSort("level"))},"Level"),a("th",{class:"table-head",onClick:t[3]||(t[3]=s=>l.setSort("value"))},"Slain"),a("th",{class:"table-head",onClick:t[4]||(t[4]=s=>l.setSort("hp"))},"Hp")]),(u(!0),i(g,null,y(l.sorted,s=>(u(),i("tr",{key:s.id,onMouseenterCapture:k(f=>e.itemOver(f,s),["stop"])},[a("th",V,d(s.name.toTitleCase()),1),a("td",N,d(Math.floor(s.level)),1),a("td",O,d(Math.floor(s.value)),1),a("td",U,d(Math.floor(s.hp)),1),l.canShowBuy(s)?(u(),i("td",F,[a("button",{type:"button",onClick:f=>l.tryUse(s),disabled:!l.canBuy(s)},"Buy",8,D)])):B("",!0)],40,M))),128))])])])}const T=m(S,[["render",E],["__scopeId","data-v-1a2a0111"]]);export{T as default};
