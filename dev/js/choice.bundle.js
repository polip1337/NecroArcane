import{_ as f,I as b,c as n,a as o,o as a,b as r,t as d,F as p,r as y,G as u,p as g,i as _,e as k,n as C}from"./wizrobe.js";const P={data(){return{title:null,list:null,elm:null,item:null,open:!1,mustPay:!1,strings:!1}},mixins:[b],created(){this.cb=null,this.plisten=()=>{this.add("choice",this.show,this)},this.listen("game-loaded",this.plisten)},beforeUnmount(){this.removeListener("game-loaded",this.plisten),this.plisten=null,this.cancel()},updated(){this.open!==!1&&(this.elm?g(this.$el,this.elm,0):_(this.$el))},computed:{choices:{get(){return this.list},set(e){if(typeof e=="string"&&(e=u.state.getData(e)),e&&e.items&&(e=e.items),Array.isArray(e))if(this.strings)this.list=e;else{var s=[];for(let c=e.length-1;c>=0;c--){var h=u.state.findData(e[c]);h&&s.push(h)}this.list=s}else this.list=null}}},methods:{show(e,s){this.title=s.title?s.title.toTitleCase():"",this.cb=s.cb,this.elm=s.elm,this.strings=s.strings,this.mustPay=s.mustPay,this.choices=e,this.open=!0,this.canRemove=s.canRemove},cantPay(e){return e.cost&&!u.canPay(e.cost)},disabled(e){return!this.strings&&!this.slottable(e)||this.mustPay&&this.cantPay(e)},choose(e){if(!(this.disabled(e)&&e)&&(this.open=!1,this.item=null,this.choices=null,this.elm=null,this.cb)){let s=this.cb;this.cb=null,s(e)}},cancel(){this.open=!1,this.cb=null,this.item=null,this.choices=null,this.elm=null}}},B={key:0,class:"popup"},v={class:"content"},w={key:0,class:"title"},A={class:"items"},D=["onMouseenterCapture","onClick"];function I(e,s,h,c,l,i){return i.choices!=null&&i.choices.length>0?(a(),n("div",B,[r("div",v,[l.title?(a(),n("span",w,d(l.title),1)):o("",!0),r("div",A,[(a(!0),n(p,null,y(i.choices,t=>(a(),n("button",{type:"button",class:C(["task-btn",i.disabled(t)&&"disabled"]),key:l.strings?t:t.id,onMouseenterCapture:k(m=>l.strings?"":e.itemOver(m,t),["stop"]),onClick:m=>i.choose(t)},d(l.strings?t:t.name),43,D))),128)),e.canRemove?(a(),n("button",{key:0,type:"button",class:"task-btn",onClick:s[0]||(s[0]=t=>i.choose(!1))},"None")):o("",!0)]),r("button",{type:"button",class:"close-btn",onClick:s[1]||(s[1]=(...t)=>i.cancel&&i.cancel(...t))},"Cancel")])])):o("",!0)}const N=f(P,[["render",I],["__scopeId","data-v-86d6c114"]]);export{N as default};
