const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/bars.bundle.js","js/wizrobe.js","assets/wizrobe.css","js/inventory.bundle.js","js/filterbox.bundle.js","assets/filterbox.css","assets/inventory.css"])))=>i.map(i=>d[i]);
import{_ as D,S as _,c as u,o as l,b as s,$ as T,a as g,t as m,a0 as H,P as I,I as B,F as k,r as M,m as d,k as p,e as w,A as P,W as V,G as f,a1 as N,y as F,u as O,w as y,d as S,X as A,Y as E,a2 as U,s as R,a3 as j,a4 as v}from"./wizrobe.js";import{S as G}from"./slotpick.bundle.js";import{F as W}from"./filterbox.bundle.js";const K={props:["char"],data(){return{hpDelta:void 0,barrierDelta:void 0}},emits:["mouseenter"],watch:{hpVal(e,t){typeof t=="number"&&(this.hpDelta=Math.abs((e-t)/this.hpMax))},barrierVal(e,t){typeof t=="number"&&(this.barrierDelta=Math.abs((e-t)/this.barrierMax))}},computed:{hpVal(){return+this.char.hp.value},hpMax(){return+this.char.hp.max},barrierVal(){return+this.char.barrier.value},barrierMax(){return+this.char.barrier.max},barMax(){return Math.max(this.hpMax,this.barrierMax)},hpStyle(){const e=_.get("smoothBars");let t="width:"+this.hpWidth+"%";return typeof this.hpDelta=="number"&&e&&(t+=";transition: width 1000ms ease-out"),t},barrierStyle(){const e=_.get("smoothBars");let t="width:"+this.barrierWidth+"%";return typeof this.barrierDelta=="number"&&e&&(t+=";transition: width 1000ms ease-out"),t},hpWidth(){const e=Math.floor(100*(this.hpVal/this.barMax));return Math.max(0,Math.min(100,e))},barrierWidth(){const e=Math.floor(100*(this.barrierVal/this.barMax));return Math.max(0,Math.min(100,e))}}},X=["id"],z={class:"labels"},Y={key:0,class:"barrier"},q={class:"hp"};function J(e,t,r,i,a,o){return l(),u("div",{class:"container",onMouseenterCapture:t[0]||(t[0]=h=>this.$emit("mouseenter",h))},[s("div",{class:"bar",id:e.elmId("bar")},[s("div",{class:"barrier barrierfill",style:T(o.barrierStyle)},null,4),s("div",{class:"hp hpFill",style:T(o.hpStyle)},null,4),s("div",z,[o.barrierMax?(l(),u("span",Y,m(o.barrierVal.toFixed(1)+"/"+o.barrierMax.toFixed(1)),1)):g("",!0),s("span",q,m(o.hpVal.toFixed(1)+"/"+o.hpMax.toFixed(1)),1)])],8,X)],32)}const Q=D(K,[["render",J],["__scopeId","data-v-cb66d5c9"]]),Z={mixins:[B],props:["npcs","label"],components:{bar:Q,prog:I,dots:H}},$={class:"npc-group"},ee={key:0,class:"title"},te={class:"name-span"},se=["onMouseenterCapture"];function oe(e,t,r,i,a,o){const h=d("dots"),x=d("bar"),C=d("prog");return l(),u("div",$,[r.label?(l(),u("span",ee,m(r.label),1)):g("",!0),(l(!0),u(k,null,M(r.npcs,c=>(l(),u("div",{key:c.id},[s("span",te,[s("span",{onMouseenterCapture:w(b=>e.itemOver(b,c),["stop"])},m(c.name.toTitleCase()),41,se),p(h,{class:"inline",mini:"true",dots:c.dots,char:c},null,8,["dots","char"])]),p(x,{char:c,onMouseenterCapture:w(b=>e.itemOver(b,c),["stop"])},null,8,["char","onMouseenterCapture"]),p(C,{type:"timer",revbar:!0,smallbar:!0,value:c.timer,max:c.delay},null,8,["value","max"])]))),128))])}const ae=D(Z,[["render",oe],["__scopeId","data-v-d62f7f62"]]),re={props:["combat"],components:{"npc-group":ae}},ne={class:"combat"};function le(e,t,r,i,a,o){const h=d("npc-group");return l(),u("div",ne,[p(h,{class:"group",npcs:r.combat.allies,label:"Allies"},null,8,["npcs"]),p(h,{class:"group",npcs:r.combat.enemies,label:"Enemies"},null,8,["npcs"])])}const ie=D(re,[["render",le],["__scopeId","data-v-286ffccc"]]),ce={props:["explore"],components:{combat:ie,bars:P(()=>F(()=>import("./bars.bundle.js"),__vite__mapDeps([0,1,2]))),progbar:I},created(){this.HALT_TASK=N,this.lastEnc=null,this.lastCombat=!0},methods:{encOver(e){this.enc&&this.itemOver(e,this.enc)},joinedtext(e){return Array.isArray(e)?e.join(`
`):e}},computed:{stressors(){return f.state.stressors.filter(e=>!e.locked&&!e.disabled)},player(){return f.state.player},type(){return this.explore.locale.type},inCombat(){return this.enc?this.enc===this.explore.combat:this.type===V},enc(){return this.explore.enc&&(this.lastEnc=this.explore.enc),this.lastEnc},encDesc(){return this.enc?this.enc.desc:"&nbsp;"},encName(){return this.enc?this.enc.name.toTitleCase():"&nbsp;"},encProg(){return this.enc?this.enc.exp.valueOf():0},encLen(){return this.enc?this.enc.length.valueOf():0},localeBars(){var e,t;return((t=(e=this.explore)==null?void 0:e.locale)==null?void 0:t.bars)??void 0}}},ue={class:"explore"},he={class:"active-title"},de={class:"bar"},pe=["innerHTML"],me=["innerHTML"],_e={class:"stressors"},be=["onMouseenterCapture"];function fe(e,t,r,i,a,o){const h=d("progbar"),x=d("bars"),C=d("combat");return l(),u("div",ue,[s("span",he,[s("span",null,m(r.explore.name.toTitleCase()),1),s("button",{type:"button",class:"raid-btn",onClick:t[0]||(t[0]=c=>e.emit(e.HALT_TASK,r.explore.locale)),onMouseenterCapture:t[1]||(t[1]=w(c=>e.itemOver(c,r.explore.locale),["stop"]))}," Flee ",32)]),s("span",de,[p(h,{value:r.explore.exp.valueOf(),max:Number(r.explore.length)},null,8,["value","max"])]),o.localeBars?(l(),O(x,{key:0,bars:o.localeBars},null,8,["bars"])):g("",!0),o.inCombat?(l(),O(C,{key:1,combat:r.explore.combat},null,8,["combat"])):(l(),u(k,{key:2},[s("div",{onMouseenterCapture:t[2]||(t[2]=w(c=>o.encOver(c),["stop"]))},[s("span",{class:"name",innerHTML:o.encName},null,8,pe),s("div",{class:"desc",innerHTML:o.joinedtext(o.encDesc)},null,8,me),p(h,{value:o.encProg,max:o.encLen},null,8,["value","max"])],32),s("div",_e,[(l(!0),u(k,null,M(o.stressors,c=>(l(),u("div",{class:"stress",key:c.id,onMouseenterCapture:w(b=>e.itemOver(b,c),["stop"])},[s("span",null,m(c.name.toTitleCase()),1),p(h,{value:c.value.valueOf(),max:c.max.value},null,8,["value","max"])],40,be))),128))])],64))])}const ve=D(ce,[["render",fe],["__scopeId","data-v-3dd264ef"]]),ge=7,we={props:["state"],mixins:[B],data(){let e=_.getSubVars(v);return{showDone:e.hasOwnProperty("showDone")?e.showDone:!0,showCombatDungeon:e.hasOwnProperty("showCombatDungeon")?e.showCombatDungeon:!0,showLocale:e.hasOwnProperty("showLocale")?e.showLocale:!0,showClash:e.hasOwnProperty("showClash")?e.showClash:!0,lvlSort:e.lvlSort,log:f.log,filtered:null}},beforeCreate(){this.game=f},components:{explore:ve,progbar:I,filterbox:W,inv:P(()=>F(()=>import("./inventory.bundle.js"),__vite__mapDeps([3,1,2,4,5,6]))),slotpick:G},methods:{searchIt(e,t){const r=new RegExp(t,"i");if(r.test(e.name))return!0;if(e.tags){let i=e.tags;for(let a=i.length-1;a>=0;a--)if(r.test(i[a]))return!0}if(e.mod&&typeof e.mod=="object"){for(let i in e.mod)if(game.state.getData(i)&&typeof game.state.getData(i)=="object"&&r.test(game.state.getData(i).name))return!0}if(e.result)for(let i in e.result){let a=game.state.getData(i);if(a!=null&&a.name.toLowerCase().includes(t.toLowerCase()))return!0}if(e.loot&&e.value>0)for(let i in e.loot){let a=game.state.getData(i);if(a!=null&&a.name.toLowerCase().includes(t.toLowerCase()))return!0}if(e.once)for(let i in e.once){let a=game.state.getData(i);if(a!=null&&a.name.toLowerCase().includes(t.toLowerCase()))return!0}return!1}},computed:{chkLevelSort:{get(){return this.lvlSort},set(e){this.lvlSort=_.setSubVar(v,"lvlSort",e)}},chkShowDone:{get(){return this.showDone},set(e){this.showDone=_.setSubVar(v,"showDone",e)}},chkShowCombatDungeon:{get(){return this.showCombatDungeon},set(e){this.showCombatDungeon=_.setSubVar(v,"showCombatDungeon",e)}},chkShowClash:{get(){return this.showClash},set(e){this.showClash=_.setSubVar(v,"showClash",e)}},chkShowLocale:{get(){return this.showLocale},set(e){this.showLocale=_.setSubVar(v,"showLocale",e)}},mount(){return f.state.getSlot("mount")},dist(){return f.player.dist},drops(){return f.state.drops},combatLog(){let e=this.log.items,t=0,r=[];for(let a=e.length-1;a>=0;a--){var i=e[a];if(i.type===j&&(r.push(i),++t===ge))break}return r},explore(){return this.state.explore},allLocs(){return this.state.filterItems(e=>e.type===V||e.type===A||e.type===E).sort(this.lvlSort?U:R)},locales(){let e=this.showDone,t=this.showCombatDungeon,r=this.showLocale,i=this.showClash;return this.allLocs.filter(a=>!this.locked(a)&&(e||a.value<=0)&&(t||a.type!==V)&&(r||a.type!==A)&&(i||a.type!==E))}}},xe={class:"adventure"},Ce={key:1,class:"content"},ye={class:"top"},Se={class:"opt"},ke=["id"],De=["for"],Le={class:"opt"},Me=["id"],Ve=["for"],Oe={class:"opt"},Ie=["id"],Te=["for"],Ae={class:"opt"},Ee=["id"],Be=["for"],Pe={class:"opt"},Fe=["id"],He=["for"],Ne={class:"locales"},Ue={class:"separate"},Re=["onMouseenterCapture"],je=["disabled","onClick"],Ge={class:"sym"},We={key:2,class:"raid-bottom"},Ke={class:"log"},Xe={class:"outlog"},ze={key:0,class:"log-title"},Ye={key:0,class:"log-text"};function qe(e,t,r,i,a,o){const h=d("explore"),x=d("slotpick"),C=d("filterbox"),c=d("progbar"),b=d("inv");return l(),u("div",xe,[o.explore.running?(l(),O(h,{key:0,explore:o.explore},null,8,["explore"])):(l(),u("div",Ce,[s("div",ye,[p(x,{title:"Mount",pick:"mount",canRemove:"true"}),s("span",null," Distance: "+m(o.dist.current),1),s("span",null,[s("span",Se,[y(s("input",{id:e.elmId("lvlSort"),type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=n=>o.chkLevelSort=n)},null,8,ke),[[S,o.chkLevelSort]]),s("label",{for:e.elmId("lvlSort")},"Sort Level",8,De)])]),s("span",null,[s("span",Le,[y(s("input",{id:e.elmId("showDone"),type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=n=>o.chkShowDone=n)},null,8,Me),[[S,o.chkShowDone]]),s("label",{for:e.elmId("showDone")},"Complete",8,Ve)]),s("span",Oe,[y(s("input",{id:e.elmId("ShowCombatDungeon"),type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=n=>o.chkShowCombatDungeon=n)},null,8,Ie),[[S,o.chkShowCombatDungeon]]),s("label",{for:e.elmId("ShowCombatDungeon")},"Dungeon",8,Te)]),s("span",Ae,[y(s("input",{id:e.elmId("ShowClash"),type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=n=>o.chkShowClash=n)},null,8,Ee),[[S,o.chkShowClash]]),s("label",{for:e.elmId("ShowClash")},"Clash",8,Be)]),s("span",Pe,[y(s("input",{id:e.elmId("showLocale"),type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=n=>o.chkShowLocale=n)},null,8,Fe),[[S,o.chkShowLocale]]),s("label",{for:e.elmId("showLocale")},"Locale",8,He)])]),p(C,{class:"inline",modelValue:a.filtered,"onUpdate:modelValue":t[5]||(t[5]=n=>a.filtered=n),prop:o.searchIt,items:o.locales},null,8,["modelValue","prop","items"])]),s("div",Ne,[(l(!0),u(k,null,M(a.filtered,n=>(l(),u("div",{class:"locale",key:n.id},[s("span",Ue,[s("span",{onMouseenterCapture:w(L=>e.itemOver(L,n),["stop"])},[s("span",null,m(n.sname.toString().toTitleCase()),1),s("button",{type:"button",class:"raid-btn",disabled:!e.game.canRun(n),onClick:L=>e.emit("task",n)}," Enter ",8,je)],40,Re),s("span",Ge,m(n.sym),1)]),p(c,{value:n.exp.valueOf(),max:n.length.valueOf()},null,8,["value","max"])]))),128))])])),o.explore.running||o.drops.count>0?(l(),u("div",We,[p(b,{class:"inv",inv:r.state.inventory,types:"potion",nosearch:"true",combat:"true"},null,8,["inv"]),s("div",Ke,[s("div",Xe,[(l(!0),u(k,null,M(o.combatLog,(n,L)=>(l(),u("div",{class:"log-item",key:L},[s("div",null,[s("div",null,[n.title?(l(),u("span",ze,m(n.title.toString().toTitleCase()),1)):g("",!0)]),n.text?(l(),u("span",Ye,m(n.text),1)):g("",!0)])]))),128))])])])):g("",!0)])}const $e=D(we,[["render",qe],["__scopeId","data-v-21368293"]]);export{$e as default};
