import{_ as p,aa as b,I as y,c as i,o as l,k as _,a as m,b as n,m as h,t as a,F as v,r as f,G as u,g as C,h as z,e as w,w as M,v as N,B as V,l as A}from"./wizrobe.js";import{F as B}from"./filterbox.bundle.js";const I={data(){return{filtered:null}},mixins:[y],components:{filterbox:B},computed:{allies(){return this.minions.allies},inExplore(){return u.state.explore.running},rezList(){return u.state.getTagSet("rez").filter(t=>t.owned&&!t.disabled)},minions(){return u.state.minions}},methods:{move:b,rezzes(t){return this.rezList.filter(r=>r.canRez(t))},useRez(t,r){u.tryItem(t)},toggleActive(t){this.minions.setActive(t,!t.active)},dismiss(t){this.minions.remove(t)},toNum(t){return t==null?0:(typeof t=="object"?+t.value:t).toFixed(1)}}},k=t=>(C("data-v-b1b30b1b"),t=t(),z(),t),L={class:"minions"},E={key:0,class:"warn-text"},F={class:"minion-title"},S={class:"char-list"},D=k(()=>n("tr",null,[n("th",null,"Order"),n("th",null,"Creature"),n("th",{class:"num-align"},"Level"),n("th",{class:"num-align"},"Life & Barrier"),n("th",null,"Actions")],-1)),R=["onMouseenterCapture"],U=["disabled","onClick"],O=["disabled","onClick"],T=["onUpdate:modelValue"],G={class:"num-align"},j={class:"num-align"},q={key:0},H={key:2},J=k(()=>n("span",null,"Dead",-1)),K=[J],P={key:3},Q=["onClick","disabled"],W=["onClick","disabled"],X={key:4},Y=["disabled","onClick"];function Z(t,r,$,ee,d,e){const g=h("filterbox"),x=h("confirm");return l(),i("div",L,[_(g,{modelValue:d.filtered,"onUpdate:modelValue":r[0]||(r[0]=s=>d.filtered=s),items:this.minions.items,"min-items":10},null,8,["modelValue","items"]),e.inExplore?(l(),i("div",E,"Cannot change active minions while adventuring")):m("",!0),n("div",F,[n("span",null,"Owned Minions: "+a(e.minions.count+" / "+Math.floor(e.minions.max)),1),n("span",null,"Minions Levels: "+a(Math.floor(e.allies.used)+" / "+Math.floor(e.allies.max.value)),1)]),n("div",S,[n("table",null,[D,(l(!0),i(v,null,f(d.filtered,(s,c)=>(l(),i("tr",{class:"char-row",key:s.id,onMouseenterCapture:w(o=>t.itemOver(o,s),["stop"])},[d.filtered.length==e.minions.items.length?(l(),i("button",{key:0,type:"button",disabled:!(c>0),class:"stop",onClick:o=>e.minions.items=e.move(e.minions.items,c,-1)}," ↑ ",8,U)):m("",!0),d.filtered.length==e.minions.items.length?(l(),i("button",{key:1,type:"button",disabled:!(c<e.minions.items.length-1),class:"stop",onClick:o=>e.minions.items=e.move(e.minions.items,c,1)}," ↓ ",8,O)):m("",!0),n("th",null,[M(n("input",{class:"fld-name",type:"text","onUpdate:modelValue":o=>s.name=o},null,8,T),[[N,s.name]])]),n("td",G,"Lvl."+a(s.level),1),n("td",j,[n("div",null,a(e.toNum(s.hp))+" / "+a(e.toNum(s.hp.max)),1),s.barrier.max>0?(l(),i("div",q,a(e.toNum(s.barrier))+" / "+a(e.toNum(s.barrier.max)),1)):m("",!0)]),s.alive?(l(),i("td",P,[s.active?(l(),i("button",{key:0,type:"button",onClick:o=>e.toggleActive(s),disabled:e.inExplore}," Rest ",8,Q)):(l(),i("button",{key:1,type:"button",onClick:o=>e.toggleActive(s),disabled:e.inExplore||!e.allies.canAdd(s)}," Activate ",8,W))])):(l(),i("td",H,K)),s.alive?m("",!0):(l(),i("td",X,[(l(!0),i(v,null,f(e.rezzes(s),o=>(l(),i("button",{type:"button",class:"rez",key:o.id,disabled:!o.canUse(),onClick:te=>e.useRez(o,s)},a(o.name),9,Y))),128))])),n("td",null,[_(x,{onConfirm:o=>e.dismiss(s)},{default:V(()=>[A(a("Dismiss"))]),_:2},1032,["onConfirm"])])],40,R))),128))])])])}const ie=p(I,[["render",Z],["__scopeId","data-v-b1b30b1b"]]);export{ie as default};
