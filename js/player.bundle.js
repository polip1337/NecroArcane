const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/hall.bundle.js","js/wizrobe.js","assets/wizrobe.css","assets/hall.css"])))=>i.map(i=>d[i]);
import{_ as w,G as y,s as C,c as o,o as a,b as t,a as p,F as g,r as v,e as c,t as n,z as M,E as N,A as R,u as S,k,m as b,w as E,v as D,l as _,q as H,J as U,D as O,y as F,g as z,h as A}from"./wizrobe.js";import{S as I}from"./slotpick.bundle.js";const V={methods:{count(e){return e.value>1?" ("+Math.floor(e.value)+")":""}},computed:{classes(){return y.state.classes.filter(e=>!e.disabled&&e.value>=1)},tiers(){return y.state.upgrades.filter(e=>e.max>=1&&!e.disabled&&e.value>=1&&e.wizardtier)},tasks(){return y.state.tasks.filter(e=>e.max>=1&&!e.disabled&&e.value>=1&&!e.morality).sort(C)},morals(){return y.state.tasks.filter(e=>e.max>=1&&!e.disabled&&e.value>=1&&e.morality).sort(C)},upgrades(){return y.state.upgrades.filter(e=>!e.disabled&&e.value>=1&&!e.wizardtier).sort(C)},hallUpgrades(){return Object.values(y.state.items).filter(e=>e.type==="upgrade"&&!this.upgrades.includes(e)&&!e.disabled&&e.value>=1&&!e.wizardtier).sort(C)}}},B={class:"allupgrades"},L={class:"up-list"},q={key:0,class:"div-hr"},G=["onMouseenterCapture"],j={key:1,class:"div-hr"},J=["onMouseenterCapture"],W={key:2,class:"div-hr"},K=["onMouseenterCapture"],Q={key:3,class:"div-hr"},X=["onMouseenterCapture"],Y={key:4,class:"div-hr"},Z=["onMouseenterCapture"],x={key:5,class:"div-hr"},$=["onMouseenterCapture"];function ee(e,l,f,h,T,s){return a(),o("div",B,[t("div",L,[s.classes.length!=0?(a(),o("div",q,"Classes")):p("",!0),(a(!0),o(g,null,v(s.classes,i=>(a(),o("div",{key:i.id,onMouseenterCapture:c(d=>e.itemOver(d,i),["stop"])},n(i.name.toTitleCase()+s.count(i)),41,G))),128)),s.tiers.length!=0?(a(),o("div",j,"Tiers")):p("",!0),(a(!0),o(g,null,v(s.tiers,i=>(a(),o("div",{key:i.id,onMouseenterCapture:c(d=>e.itemOver(d,i),["stop"])},n(i.name.toTitleCase()+s.count(i)),41,J))),128)),s.morals.length!=0?(a(),o("div",W,"Morality")):p("",!0),(a(!0),o(g,null,v(s.morals,i=>(a(),o("div",{key:i.id,onMouseenterCapture:c(d=>e.itemOver(d,i),["stop"])},n(i.name.toTitleCase()+s.count(i)),41,K))),128)),s.tasks.length!=0?(a(),o("div",Q,"Tasks")):p("",!0),(a(!0),o(g,null,v(s.tasks,i=>(a(),o("div",{key:i.id,onMouseenterCapture:c(d=>e.itemOver(d,i),["stop"])},n(i.name.toTitleCase()+s.count(i)),41,X))),128)),s.upgrades.length!=0?(a(),o("div",Y,"Upgrades")):p("",!0),(a(!0),o(g,null,v(s.upgrades,i=>(a(),o("div",{key:i.id,onMouseenterCapture:c(d=>e.itemOver(d,i),["stop"])},n(i.name.toTitleCase()+s.count(i)),41,Z))),128)),s.hallUpgrades.length!=0?(a(),o("div",x,"Hall Upgrades")):p("",!0),(a(!0),o(g,null,v(s.hallUpgrades,i=>(a(),o("div",{key:i.id,onMouseenterCapture:c(d=>e.itemOver(d,i),["stop"])},n(i.name.toTitleCase()+s.count(i)),41,$))),128))])])}const te=w(V,[["render",ee],["__scopeId","data-v-fe12ec1c"]]),se={components:{upgrades:te,slotpick:I,hall:R(()=>F(()=>import("./hall.bundle.js"),__vite__mapDeps([0,1,2,3])))},data(){return{hallOpen:!1}},beforeCreate(){this.player=y.state.player},computed:{wizName:{get(){return this.player.name},set(e){e&&this.player.setName(e)}},hallUnlocked(){return O.hasHall()},hallName(){return O.hall.name},title(){return this.player.title},speed(){return this.player.speed.value},delay(){return"".concat("Turn delay: ",U(this.player.speed.value).toPrecision(2)," seconds")},bonusNames(){return Object.keys(this.player.bonuses)},level(){return this.player.level.value},defense(){return this.player.defense},dodge(){return Math.floor(this.player.dodge.valueOf())},thorns(){return Math.floor(this.player.stat_thorns.valueOf())},reflect(){return Math.floor(this.player.stat_reflect.valueOf())},luck(){return Math.floor(this.player.luck.valueOf())},damage(){return this.player.damage.valueOf()},tohit(){return this.player.tohit.value},exp(){return this.floor(this.player.exp.value)},next(){return this.floor(this.player.next)},mount(){return y.state.getSlot("mount")},chainhit(){return(this.player.chainhit-1).toPrecision(3)},chaincast(){return(this.player.chaincast-1).toPrecision(3)},sp(){return this.player.sp},spStr(){return H(this.player.sp)},resist(){return this.player.resist},orderedResist(){let e={slash:0,pierce:0,blunt:0,mana:0,water:0,air:0,fire:0,earth:0,nature:0,spirit:0,light:0,shadow:0},l=this.resist;for(let f in l)e[f]=l[f].value;return e},potencies(){return y.state.potencies.filter(e=>M(e.value)!=100)},orderedPotencies(){let e={physdmg:!0,spelldmg:!0,spellheal:!0},l={slashdmg:!0,piercedmg:!0,bluntdmg:!0,manadmg:!0,waterdmg:!0,airdmg:!0,firedmg:!0,earthdmg:!0,naturedmg:!0,spiritdmg:!0,lightdmg:!0,shadowdmg:!0},f=this.potencies;for(let h of f)e[h.id]?e[h.id]=h:l[h.id]=h;for(let h in e)e[h]===!0&&delete e[h];for(let h in l)l[h]===!0&&delete l[h];return[e,l]},globalPotencies(){return this.orderedPotencies[0]},schoolPotencies(){return this.orderedPotencies[1]},notorietyTip(){return this.hallUnlocked?"A measure of reputation. Each point of notoriety provides one point of hall prestige. Hall prestige may be spent to purchase Hall Upgrades.":"A measure of reputation. Found a Wizard's Hall to learn more."},defenseTip(){return"Reduces damage taken."},dodgeTip(){return"Determines your chance to dodge."},thornsTip(){return"Retaliates with flat damage when struck by an enemy. Reduced by enemy defense."},reflectTip(){return"Retaliates with percentage of damage taken when struck by an enemy. Reduced by enemy defense."},hitTip(){return"Determines your accuracy. Every 100 hit bonus halves opponents effective dodge"},luckTip(){return"Increases your overall chance to gain loot."},chainhitTip(){return"Each point means an additional attack is made each turn. Fractional amounts translate to a percentage chance (eg:- 0.2 equals 20%)."},chaincastTip(){return"Each point means an additional spell cast each turn. Fractional amounts translate to a percentage chance (eg:- 0.2 equals 20%)."}},methods:{floor:N,precise:M,openHall(){this.hallOpen=!0},closeHall(){this.hallOpen=!1},pickTitle(e){this.emit("choice",this.player.titles,{cb:l=>{l&&this.player.setTitle(l)},elm:e.target,strings:!0,title:"Titles"})}}},u=e=>(z("data-v-2648c553"),e=e(),A(),e),le={class:"player-view"},re={class:"stat-block"},ae={class:"text-entry"},ne={key:0},oe={class:"stat-block"},ie={class:"slotpick"},ue=u(()=>t("strong",null,"Body shape",-1)),de={class:"slotpick"},ce=u(()=>t("strong",null,"Leisure",-1)),he={class:"slotpick"},pe=u(()=>t("strong",null,"Mount",-1)),me={class:"slotpick"},ge=u(()=>t("strong",null,"Companion",-1)),ve=u(()=>t("h4",{class:"section-header"},"Personal",-1)),ye={class:"stat-block"},_e={class:"stat"},fe=u(()=>t("strong",null,[_("Level"),t("br"),_("Experience")],-1)),ke=u(()=>t("br",null,null,-1)),Ce={class:"stat"},be=u(()=>t("strong",null,[_("Virtue"),t("br"),_("Evil")],-1)),Te=u(()=>t("br",null,null,-1)),Me=u(()=>t("strong",null,"Notoriety:",-1)),Oe=u(()=>t("h4",{class:"section-header"},"Combat",-1)),we={class:"stat-block"},Pe=u(()=>t("strong",null,"Defense:",-1)),Ne=u(()=>t("strong",null,"Dodge:",-1)),Re=u(()=>t("strong",null,"Thorns:",-1)),Se=u(()=>t("strong",null,"Hit Bonus:",-1)),Ee=u(()=>t("strong",null,"Speed:",-1)),De=u(()=>t("strong",null,"Luck:",-1)),He={key:1},Ue=u(()=>t("strong",null,"Extra Attacks:",-1)),Fe={key:2},ze=u(()=>t("strong",null,"Extra Spell Casts:",-1)),Ae=u(()=>t("h4",{class:"section-header"},"Global Potencies",-1)),Ie={class:"stat-block"},Ve=u(()=>t("h4",{class:"section-header"},"Potencies",-1)),Be={class:"stat-block"},Le=u(()=>t("h4",{class:"section-header"},"Status Negation",-1)),qe={class:"stat-block"},Ge=u(()=>t("h4",{class:"section-header"},"Resists",-1)),je={class:"stat-block"};function Je(e,l,f,h,T,s){const i=b("hall"),d=b("slotpick"),P=b("upgrades");return a(),o("div",le,[T.hallOpen?(a(),S(i,{key:0,onClose:s.closeHall},null,8,["onClose"])):p("",!0),t("div",null,[t("div",re,[t("h3",ae,[E(t("input",{type:"text",class:"fld-name","onUpdate:modelValue":l[0]||(l[0]=r=>s.wizName=r)},null,512),[[D,s.wizName]]),s.hallUnlocked?(a(),o("span",ne,[t("button",{type:"button",onClick:l[1]||(l[1]=(...r)=>s.openHall&&s.openHall(...r))},n(s.hallName),1)])):p("",!0)]),t("span",{onMouseenterCapture:l[3]||(l[3]=c(r=>e.itemOver(r,e.player.titles,null,"Titles"),["stop"]))},[e.player.titles.length>0?(a(),o("button",{key:0,type:"button",class:"titleConfig",onClick:l[2]||(l[2]=r=>s.pickTitle(r))})):p("",!0),t("strong",null,"Title: "+n(s.title),1)],32)]),t("div",oe,[t("div",ie,[ue,k(d,{pick:"bodyplan"})]),t("div",de,[ce,k(d,{pick:"leisure",canRemove:"true"})]),t("div",he,[pe,k(d,{pick:"mount",canRemove:"true"})]),t("div",me,[ge,k(d,{pick:"companion",canRemove:"true"})])]),ve,t("div",ye,[t("div",_e,[fe,t("span",null,[_(n(s.level),1),ke,_(n(s.exp)+" / "+n(s.next),1)])]),t("div",Ce,[be,t("span",null,[_(n(Math.floor(e.player.virtue.valueOf())),1),Te,_(n(Math.floor(e.player.evilamt.valueOf())),1)])]),t("div",{class:"stat",onMouseenterCapture:l[4]||(l[4]=c(r=>e.itemOver(r,null,null,null,s.notorietyTip),["stop"]))},[Me,t("span",null,n(Math.floor(e.player.fame.valueOf())),1)],32)]),Oe,t("div",we,[t("div",{class:"stat",onMouseenterCapture:l[5]||(l[5]=c(r=>e.itemOver(r,null,null,null,s.defenseTip),["stop"]))},[Pe,t("span",null,n(s.defense)+" ("+n((100-100*e.player.getDefenceMultiplier()).toFixed(1))+"%)",1)],32),t("div",{class:"stat",onMouseenterCapture:l[6]||(l[6]=c(r=>e.itemOver(r,null,null,null,s.dodgeTip),["stop"]))},[Ne,t("span",null,n(s.dodge)+" ("+n((100*e.player.getDodgeChance()).toFixed(1))+"%)",1)],32),s.thorns>0?(a(),o("div",{key:0,class:"stat",onMouseenterCapture:l[7]||(l[7]=c(r=>e.itemOver(r,null,null,null,s.thornsTip),["stop"]))},[Re,t("span",null,n(s.thorns),1)],32)):p("",!0),t("div",{class:"stat",onMouseenterCapture:l[8]||(l[8]=c(r=>e.itemOver(r,null,null,null,s.hitTip),["stop"]))},[Se,t("span",null,n(s.precise(s.tohit)),1)],32),t("div",{class:"stat",onMouseenterCapture:l[9]||(l[9]=c(r=>e.itemOver(r,null,null,null,s.delay),["stop"]))},[Ee,t("span",null,n(s.speed),1)],32),t("div",{class:"stat",onMouseenterCapture:l[10]||(l[10]=c(r=>e.itemOver(r,null,null,null,s.luckTip),["stop"]))},[De,t("span",null,n(s.luck),1)],32),s.chainhit>0?(a(),o("div",He,[t("div",{class:"stat",onMouseenterCapture:l[11]||(l[11]=c(r=>e.itemOver(r,null,null,null,s.chainhitTip),["stop"]))},[Ue,t("span",null,n(s.chainhit),1)],32)])):p("",!0),s.chaincast>0?(a(),o("div",Fe,[t("div",{class:"stat",onMouseenterCapture:l[12]||(l[12]=c(r=>e.itemOver(r,null,null,null,s.chaincastTip),["stop"]))},[ze,t("span",null,n(s.chaincast),1)],32)])):p("",!0)]),t("div",null,[Ae,t("div",Ie,[(a(!0),o(g,null,v(s.globalPotencies,(r,m)=>(a(),o("div",{key:m,class:"stat"},[t("strong",null,n(r.name.replace(" damage","").toTitleCase()),1),t("span",null,n(s.precise(r.value))+"%",1)]))),128))]),Ve,t("div",Be,[(a(!0),o(g,null,v(s.schoolPotencies,(r,m)=>(a(),o("div",{key:m,class:"stat"},[t("strong",null,n(r.name.replace(" damage","").toTitleCase()),1),t("span",null,n(s.precise(r.value))+"%",1)]))),128))]),Le,t("div",qe,[(a(!0),o(g,null,v(e.player.negate,(r,m)=>(a(),o("div",{key:m,class:"stat"},[t("strong",null,n(m.toString().toTitleCase()),1),t("span",null,n(s.floor(r.value))+"%",1)]))),128))]),Ge,t("div",je,[(a(!0),o(g,null,v(s.orderedResist,(r,m)=>(a(),o("div",{key:m,class:"stat"},[t("strong",null,n(m.toString().toTitleCase()),1),t("span",null,n(s.floor(r))+" ("+n((100-100*e.player.getResistMultiplier(m)).toFixed(1))+"%)",1)]))),128))])])]),k(P)])}const Qe=w(se,[["render",Je],["__scopeId","data-v-2648c553"]]);export{Qe as default};
