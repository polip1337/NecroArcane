import{_ as k,I as C,G as m,c as n,o as a,a as u,b as s,F as h,r as v,t as r,l as _,g as L,h as g,w,v as S,e as p,L as I,n as b}from"./wizrobe.js";const T={mixins:[C],props:{list:Object,topTier:Number,spellLoadouts:Object,currentSpellLoadout:String},methods:{canAdd(l){return l.level+this.craft.level<=this.maxLevels},chooseLoadout:function(l){let i=event.srcElement.value;this.spellLoadouts.changeLoadout(m.state,i)},create(l=null){l?this.spellLoadouts.create(m.state,l):this.spellLoadouts.create(m.state)}}},B=l=>(L("data-v-13cc3ab0"),l=l(),g(),l),O={class:"spelllist",functional:""},A={key:0,class:"spellloadouts"},M=["value","selected"],N={key:0,class:"warn-text"},x={key:1},V=B(()=>s("span",{class:"hint"},"You can press Alt+{Num} to change lists as well.",-1)),z={class:"text-entry"},F=["onUpdate:modelValue"],U=["disabled","onClick"],j=["disabled","onClick"],q=["disabled","onClick"],D={class:"maxlevels"},E={key:0,class:"warn-text note-text"},G=["onMouseenterCapture"],X=["disabled","onClick"],Y=["disabled","onClick"],H=["onClick"];function J(l,i,e,y,f,d){return a(),n("div",O,[e.topTier>=1?(a(),n("div",A,[s("div",null,[s("select",{onChange:i[0]||(i[0]=t=>d.chooseLoadout())},[(a(!0),n(h,null,v(e.spellLoadouts.items,t=>(a(),n("option",{value:t.id,selected:e.currentSpellLoadout===t.id},r(t.name),9,M))),256))],32)]),e.spellLoadouts.items.length>e.topTier?(a(),n("span",N," At your limit of "+r(e.topTier+1)+" spell lists. ",1)):u("",!0),e.spellLoadouts.items.length>e.topTier?u("",!0):(a(),n("div",x,[s("button",{type:"button",onClick:i[1]||(i[1]=t=>d.create(!0))},"Copy List"),s("button",{onClick:i[2]||(i[2]=t=>d.create(null))},"New List")])),V,(a(!0),n(h,null,v(e.spellLoadouts.items,(t,o)=>(a(),n("div",{class:"custom",key:"l"+o},[s("span",z,[_(" ["+r(o+1)+"]",1),w(s("input",{class:"fld-name",type:"text","onUpdate:modelValue":c=>t.name=c},null,8,F),[[S,t.name]]),s("button",{type:"button",disabled:!(o>0),class:"stop",onClick:c=>e.spellLoadouts.moveInd(o,-1)}," ↑ ",8,U),s("button",{type:"button",disabled:!(o<e.spellLoadouts.items.length-1),class:"stop",onClick:c=>e.spellLoadouts.moveInd(o,1)}," ↓ ",8,j),s("button",{type:"button",disabled:t.id===e.currentSpellLoadout,class:"stop",onClick:c=>e.spellLoadouts.removeAt(o)}," X ",8,q)])]))),128))])):u("",!0),s("div",null,[s("button",{type:"button",onClick:i[3]||(i[3]=t=>e.list.removeAll())},"Clear all spells")]),s("span",D,[_(" Max Levels: "+r(e.list.used+" / "+Math.floor(e.list.max.value))+" ",1),e.list.full()?(a(),n("div",E,"Spelllist is Full")):u("",!0)]),(a(!0),n(h,null,v(e.list.items,(t,o)=>(a(),n("div",{key:o,onMouseenterCapture:p(c=>l.itemOver(c,t),["stop"])},[s("button",{type:"button",disabled:!(o>0),class:"stop",onClick:c=>e.list.moveInd(o,-1)},"↑",8,X),s("button",{type:"button",disabled:!(o<e.list.items.length-1),class:"stop",onClick:c=>e.list.moveInd(o,1)}," ↓ ",8,Y),s("button",{type:"button",class:"stop",onClick:c=>e.list.removeAt(o)},"X",8,H),s("span",null,r(t.name.toTitleCase()),1)],40,G))),128))])}const se=k(T,[["render",J],["__scopeId","data-v-13cc3ab0"]]),K={props:{spells:{type:Array,required:!0},school:{type:String,required:!0},isOpen:{type:Boolean},mode:{type:String}},mixins:[C],emits:["toggleOpen"],created(){this.game=m},methods:{formatNumber:I},computed:{shown(){return this.mode==="scraft"?this.spells.filter(l=>!l.hasTag("t_nospellcraft")):this.spells},list(){return m.state.spelllist},scraftlist(){return m.state.scraftlist}}},P={key:0,class:"schoolspells"},Q=["onMouseenterCapture"],R=["onClick","disabled"],W=["onClick","disabled"],Z=["onClick"],$=["onClick","disabled"];function ee(l,i,e,y,f,d){return d.shown.length>0?(a(),n("div",{key:0,class:b(["spellschool",[e.school,"bg"]])},[s("div",{class:b(["schooltitle",[e.school,"fill"]]),onClick:i[0]||(i[0]=t=>l.$emit("toggleOpen",e.school))},[s("span",null,r(e.isOpen?"▼":"▶"),1),s("span",null,r(e.school),1),s("span",null,r(e.isOpen?"▼":"◀"),1)],2),e.isOpen?(a(),n("div",P,[(a(!0),n(h,null,v(d.shown,t=>(a(),n("div",{class:"spell",onMouseenterCapture:p(o=>l.itemOver(o,t),["stop"])},[s("span",null,r(t.name.toTitleCase()),1),s("div",null,[t.owned&&e.mode!=="scraft"?(a(),n("button",{key:0,onClick:o=>l.emit("spell",t),disabled:!t.canUse(l.game),class:"spellButton"}," Cast ",8,R)):t.owned?u("",!0):(a(),n("button",{key:1,onClick:o=>l.emit("buy",t),disabled:!t.canBuy(l.game),class:"spellButton"}," Learn ",8,W)),t.owned&&d.list.canAdd(t)&&d.list.max.value>0&&e.mode!=="scraft"&&!t.hasTag("t_nomemorize")?(a(),n("button",{key:2,onClick:o=>d.list.add(t),class:"spellButton"}," Memorize ",8,Z)):u("",!0),t.owned&&e.mode==="scraft"?(a(),n("button",{key:3,onClick:o=>d.scraftlist.add(t),disabled:!d.scraftlist.canAdd(t),class:"spellButton"}," + ",8,$)):u("",!0)])],40,Q))),256))])):u("",!0)],2)):u("",!0)}const le=k(K,[["render",ee],["__scopeId","data-v-4cde7586"]]);export{se as S,le as a};
